# 七牛云26校招场景题
**议题二**

开发一个利用 AI 来做角色扮演的网页，用户可以搜索自己感兴趣的角色例如哈利波特、苏格拉底等并可与其进行语音聊天。

请回答：
1. 你计划将这个网页面向什么类型的用户？这些类型的用户他们面临什么样的痛点，你设想的用户故事是什么样呢？
2. 你认为这个网页需要哪些功能？这些功能各自的优先级是什么？你计划本次开发哪些功能？
3. 你计划采纳哪家公司的哪个 LLM 模型能力？你对比了哪些，你为什么选择用该 LLM 模型？
4. 你期望 AI 角色除了语音聊天外还应该有哪些技能？
5. 请开发以上网页，包括实现 3 个以上 AI 角色应该具备的技能。要求不能调用第三方的 Agent 能力，只需允许调用 LLM 模型、语音识别以及 TTS 能力。针对以上 1-4 点，请把你的思考整理成文档，作为作品的说明一并提交。

> 成果：产品所有源代码+如何运行程序的说明+架构设计文档（包含模块规格、分工）+录制的 demo 视频

## 问题和回答
### 1. 你计划将这个网页面向什么类型的用户？这些类型的用户他们面临什么样的痛点，你设想的用户故事是什么样呢？
面向用户：虚拟角色对话
痛点：



### 1. 面向用户与痛点分析  

**目标用户**：  
- **Z世代学生/年轻人**（15-30岁）：热爱二次元、影视、游戏、文学，渴望与“纸片人”深度互动。  
- **语言学习者**：需与“母语者”练口语或对话（如跟苏格拉底聊哲学、跟哈利波特练英式英语等等）。  
- **创意写作者/编剧**：卡文时想与角色“对戏”，激发灵感。  
- **孤独/情绪需求者**：深夜emo，想被“角色”治愈或开导。  

**痛点**：  
1. **“角色感”缺失**：现有AI聊天工具（如ChatGPT）角色扮演浮于表面，3句话就“出戏”。  
2. **“语音”门槛高**：文本聊天无法还原角色声线（如斯内普的低沉冷嘲），用户需自行脑补。  
3. **“技能”单薄**：角色只会闲聊，无法“施法”“讲独家梗”或“用世界观知识反驳用户”。  
4. **“搜索”混乱**：想找“《哈利波特》1991年时间线的哈利”，却搜到同人ooc设定。  

**用户故事**：  
> 22岁英语系女生Alice，为完成论文《苏格拉底诘问法在现代教育的应用》，凌晨2点抱着电脑哭：  
> “我好想问苏格拉底本人——‘如果学生用AI作弊，您还会坚持‘产婆术’吗？’”  
> 她打开我们的网页，搜索“苏格拉底（公元前399年）”，听到AI用带雅典口音的古希腊语英语说：  
> “年轻人，知识是灵魂的记忆，但作弊者将灵魂卖给了幻影。让我们用问答剥开你的‘幻影’……”  
> Alice哭着笑：“对！就是这个味！” 随后她要求“苏格拉底用诘问法教我写论文”，AI反问：  
> “你认为‘教育的目的是什么？’先定义它，否则我们像在沙上建塔。”  
> 30分钟后，Alice论文大纲完成，她点击“保存对话”，并分享到小红书：“家人们！谁懂啊！苏格拉底陪我写论文！”  

---

### 2. 功能清单与优先级  

| 功能 | 优先级 | 本次开发 | 说明 |
|---|---|---|---|
| **1. 角色搜索** | P0 | ✅ | 支持模糊搜索（“哈利波特”→列出“1991哈利/1997哈利/德哈同人哈利”），带标签过滤（时间线、CP、性格）。 |
| **2. 语音聊天** | P0 | ✅ | 实时语音识别（ASR）→LLM→TTS，延迟<2秒，支持打断（用户说“Expelliarmus”时AI能停）。 |
| **3. 角色技能1：世界观知识库** | P0 | ✅ | 哈利能背《霍格沃茨校规》第7条，苏格拉底能引用《申辩篇》原文。 |
| **4. 角色技能2：情绪感知** | P1 | ✅ | 当用户说“我抑郁了”，AI用角色语气安慰（斯内普：“……破特，魔药课教室凌晨3点，我假设你需要一种无梦睡眠魔药配方”）。 |
| **5. 角色技能3：互动道具** | P1 | ✅ | 哈利可“递给你一只巧克力蛙”，苏格拉底可“掏出一枚德拉克马银币”——前端弹3D动画（Three.js）。 |
| **6. 角色自定义** | P2 | ❌ | 用户上传人设图+声线克隆（后续迭代）。 |
| **7. 多人群聊** | P2 | ❌ | 让哈利、赫敏、苏格拉底同堂辩论（后续迭代）。 |

---

### 3. LLM选型对比  

| 模型 | 角色一致性 | 中文方言 | 英文口音 | 成本 | 结论 |
|---|---|---|---|---|---|
| **GPT-4o** | 强但贵 | 无方言 | 无口音 | $0.06/1k | 放弃 |
| **Claude-3.5-Sonnet** | 极强（擅长长篇角色扮演） | 无方言 | 无口音 | $0.03/1k | 放弃 |
| **Qwen3-72B**（通义千问） | 中（需微调） | 支持四川话 | 无口音 | $0.002/1k | 候选 |
| **Spark-4.0**（讯飞星火） | 中 | 支持粤语 | 支持英式/美式口音 | $0.002/1k | ✅选用理由：  
1. 口音刚需：讯飞TTS原生支持“英式少年哈利”“古希腊口音英语”，无需额外训练。  
2. 低成本：学生党免费额度10万token/天。  
3. 中文方言彩蛋：用户可让苏格拉底说四川话“巴适得板”，增加传播梗。  

---

### 4. AI角色额外技能  

- **技能4：时间线穿越**  
  用户说“带我去1993年的霍格沃茨”，AI切换背景 rain+摄魂怪音效，并告知“小天狼星刚越狱”。  
- **技能5：教学相长**  
  苏格拉底可生成“三步诘问模板”PDF供用户下载；哈利可教“除你武器”手势，前端触发摄像头检测用户手势（TF.js）。  
- **技能6：记忆书签**  
  下次登录时，哈利说“上次你说怕摄魂怪，我找了卢平教授的旧笔记给你”，并展示上次对话摘要（存在localStorage）。  

---

### 5. 交付清单  

#### ① 源码结构  
```  
lorelm/  
├─ frontend/          # Vue3+Vite（前端）  
├─ backend/           # fastapi+pydantic+sqlalchemy（后端）
├─ architecture.py    # 架构图+API文档
└─ demo/              # 录屏文件
```  

#### ② 运行说明  
```bash  
# 1. 安装  
git clone https://github.com/yourname/ai-roleplay.git  
cd ai-roleplay  
cp .env.example .env  # 填讯飞API_KEY  

# 2. 启动  
docker-compose up -d  # 一键起前端+后端+redis  

# 3. 访问  
open http://localhost:5173  
```  

```bash
alembic revision --autogenerate

alembic upgrade head
```
